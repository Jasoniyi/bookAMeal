{"version":3,"sources":["../../../../../../node_modules/@babel/core/lib/transformation/normalize-file.js"],"names":["Object","defineProperty","exports","value","default","normalizeFile","_path","data","_interopRequireDefault","require","_debug","_cloneDeep","t","_interopRequireWildcard","_convertSourceMap","_parser","_codeFrame","_file","_missingPluginHelper","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","debug","pluginPasses","options","code","ast","inputMap","inputSourceMap","fromObject","fromSource","removeComments","err","filename","fromMapFileSource","dirname","removeMapFileComments","type","file","Error","parser","parserOpts","highlightCode","results","plugins","plugin","parserOverride","parse","undefined","push","length","then","message","loc","missingPlugin","codeFrame","codeFrameColumns","start","line","column"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = normalizeFile;\n\nfunction _path() {\n  const data = _interopRequireDefault(require(\"path\"));\n\n  _path = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _debug() {\n  const data = _interopRequireDefault(require(\"debug\"));\n\n  _debug = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _cloneDeep() {\n  const data = _interopRequireDefault(require(\"lodash/cloneDeep\"));\n\n  _cloneDeep = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction t() {\n  const data = _interopRequireWildcard(require(\"@babel/types\"));\n\n  t = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _convertSourceMap() {\n  const data = _interopRequireDefault(require(\"convert-source-map\"));\n\n  _convertSourceMap = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _parser() {\n  const data = require(\"@babel/parser\");\n\n  _parser = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _codeFrame() {\n  const data = require(\"@babel/code-frame\");\n\n  _codeFrame = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _file = _interopRequireDefault(require(\"./file/file\"));\n\nvar _missingPluginHelper = _interopRequireDefault(require(\"./util/missing-plugin-helper\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst debug = (0, _debug().default)(\"babel:transform:file\");\n\nfunction normalizeFile(pluginPasses, options, code, ast) {\n  code = `${code || \"\"}`;\n  let inputMap = null;\n\n  if (options.inputSourceMap !== false) {\n    if (typeof options.inputSourceMap === \"object\") {\n      inputMap = _convertSourceMap().default.fromObject(options.inputSourceMap);\n    }\n\n    if (!inputMap) {\n      try {\n        inputMap = _convertSourceMap().default.fromSource(code);\n\n        if (inputMap) {\n          code = _convertSourceMap().default.removeComments(code);\n        }\n      } catch (err) {\n        debug(\"discarding unknown inline input sourcemap\", err);\n        code = _convertSourceMap().default.removeComments(code);\n      }\n    }\n\n    if (!inputMap) {\n      if (typeof options.filename === \"string\") {\n        try {\n          inputMap = _convertSourceMap().default.fromMapFileSource(code, _path().default.dirname(options.filename));\n\n          if (inputMap) {\n            code = _convertSourceMap().default.removeMapFileComments(code);\n          }\n        } catch (err) {\n          debug(\"discarding unknown file input sourcemap\", err);\n          code = _convertSourceMap().default.removeMapFileComments(code);\n        }\n      } else {\n        debug(\"discarding un-loadable file input sourcemap\");\n        code = _convertSourceMap().default.removeMapFileComments(code);\n      }\n    }\n  }\n\n  if (ast) {\n    if (ast.type === \"Program\") {\n      ast = t().file(ast, [], []);\n    } else if (ast.type !== \"File\") {\n      throw new Error(\"AST root must be a Program or File node\");\n    }\n\n    ast = (0, _cloneDeep().default)(ast);\n  } else {\n    ast = parser(pluginPasses, options, code);\n  }\n\n  return new _file.default(options, {\n    code,\n    ast,\n    inputMap\n  });\n}\n\nfunction parser(pluginPasses, {\n  parserOpts,\n  highlightCode = true,\n  filename = \"unknown\"\n}, code) {\n  try {\n    const results = [];\n\n    for (const plugins of pluginPasses) {\n      for (const plugin of plugins) {\n        const {\n          parserOverride\n        } = plugin;\n\n        if (parserOverride) {\n          const ast = parserOverride(code, parserOpts, _parser().parse);\n          if (ast !== undefined) results.push(ast);\n        }\n      }\n    }\n\n    if (results.length === 0) {\n      return (0, _parser().parse)(code, parserOpts);\n    } else if (results.length === 1) {\n      if (typeof results[0].then === \"function\") {\n        throw new Error(`You appear to be using an async codegen plugin, ` + `which your current version of Babel does not support. ` + `If you're using a published plugin, you may need to upgrade ` + `your @babel/core version.`);\n      }\n\n      return results[0];\n    }\n\n    throw new Error(\"More than one plugin attempted to override parsing.\");\n  } catch (err) {\n    if (err.code === \"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED\") {\n      err.message += \"\\nConsider renaming the file to '.mjs', or setting sourceType:module \" + \"or sourceType:unambiguous in your Babel config for this file.\";\n    }\n\n    const {\n      loc,\n      missingPlugin\n    } = err;\n\n    if (loc) {\n      const codeFrame = (0, _codeFrame().codeFrameColumns)(code, {\n        start: {\n          line: loc.line,\n          column: loc.column + 1\n        }\n      }, {\n        highlightCode\n      });\n\n      if (missingPlugin) {\n        err.message = `${filename}: ` + (0, _missingPluginHelper.default)(missingPlugin[0], loc, codeFrame);\n      } else {\n        err.message = `${filename}: ${err.message}\\n\\n` + codeFrame;\n      }\n\n      err.code = \"BABEL_PARSE_ERROR\";\n    }\n\n    throw err;\n  }\n}"],"file":"normalize-file.js"}