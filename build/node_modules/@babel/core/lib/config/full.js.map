{"version":3,"sources":["../../../../../../node_modules/@babel/core/lib/config/full.js"],"names":["Object","defineProperty","exports","value","default","loadFullConfig","_util","require","context","_interopRequireWildcard","_plugin","_interopRequireDefault","_item","_configChain","_traverse","data","_caching","_options","_plugins","_configApi","_partial","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","inputOpts","result","options","optionDefaults","passes","plugins","presets","Error","ignored","recurseDescriptors","config","pass","reduce","acc","descriptor","push","loadPluginDescriptor","preset","loadPresetDescriptor","ownPass","length","splice","map","o","filter","p","_ref","forEach","opts","mergeOptions","unshift","item","getItemDescriptor","e","test","message","filename","slice","passPerPreset","loadDescriptor","makeWeakCache","dirname","alias","cache","api","assign","JSON","stringify","then","instantiatePlugin","pluginObj","validatePluginObject","plugin","visitor","explode","inherits","inheritsDescriptor","name","undefined","invalidate","pre","chain","post","manipulateOptions","visitors","merge","buildPresetChain","instantiatePreset","validate","a","b","fns","Boolean","args","fn","apply"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loadFullConfig;\n\nvar _util = require(\"./util\");\n\nvar context = _interopRequireWildcard(require(\"../index\"));\n\nvar _plugin = _interopRequireDefault(require(\"./plugin\"));\n\nvar _item = require(\"./item\");\n\nvar _configChain = require(\"./config-chain\");\n\nfunction _traverse() {\n  const data = _interopRequireDefault(require(\"@babel/traverse\"));\n\n  _traverse = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _caching = require(\"./caching\");\n\nvar _options = require(\"./validation/options\");\n\nvar _plugins = require(\"./validation/plugins\");\n\nvar _configApi = _interopRequireDefault(require(\"./helpers/config-api\"));\n\nvar _partial = _interopRequireDefault(require(\"./partial\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction loadFullConfig(inputOpts) {\n  const result = (0, _partial.default)(inputOpts);\n\n  if (!result) {\n    return null;\n  }\n\n  const {\n    options,\n    context\n  } = result;\n  const optionDefaults = {};\n  const passes = [[]];\n\n  try {\n    const {\n      plugins,\n      presets\n    } = options;\n\n    if (!plugins || !presets) {\n      throw new Error(\"Assertion failure - plugins and presets exist\");\n    }\n\n    const ignored = function recurseDescriptors(config, pass) {\n      const plugins = config.plugins.reduce((acc, descriptor) => {\n        if (descriptor.options !== false) {\n          acc.push(loadPluginDescriptor(descriptor, context));\n        }\n\n        return acc;\n      }, []);\n      const presets = config.presets.reduce((acc, descriptor) => {\n        if (descriptor.options !== false) {\n          acc.push({\n            preset: loadPresetDescriptor(descriptor, context),\n            pass: descriptor.ownPass ? [] : pass\n          });\n        }\n\n        return acc;\n      }, []);\n\n      if (presets.length > 0) {\n        passes.splice(1, 0, ...presets.map(o => o.pass).filter(p => p !== pass));\n\n        for (const _ref of presets) {\n          const {\n            preset,\n            pass\n          } = _ref;\n          if (!preset) return true;\n          const ignored = recurseDescriptors({\n            plugins: preset.plugins,\n            presets: preset.presets\n          }, pass);\n          if (ignored) return true;\n          preset.options.forEach(opts => {\n            (0, _util.mergeOptions)(optionDefaults, opts);\n          });\n        }\n      }\n\n      if (plugins.length > 0) {\n        pass.unshift(...plugins);\n      }\n    }({\n      plugins: plugins.map(item => {\n        const desc = (0, _item.getItemDescriptor)(item);\n\n        if (!desc) {\n          throw new Error(\"Assertion failure - must be config item\");\n        }\n\n        return desc;\n      }),\n      presets: presets.map(item => {\n        const desc = (0, _item.getItemDescriptor)(item);\n\n        if (!desc) {\n          throw new Error(\"Assertion failure - must be config item\");\n        }\n\n        return desc;\n      })\n    }, passes[0]);\n\n    if (ignored) return null;\n  } catch (e) {\n    if (!/^\\[BABEL\\]/.test(e.message)) {\n      e.message = `[BABEL] ${context.filename || \"unknown\"}: ${e.message}`;\n    }\n\n    throw e;\n  }\n\n  const opts = optionDefaults;\n  (0, _util.mergeOptions)(opts, options);\n  opts.plugins = passes[0];\n  opts.presets = passes.slice(1).filter(plugins => plugins.length > 0).map(plugins => ({\n    plugins\n  }));\n  opts.passPerPreset = opts.presets.length > 0;\n  return {\n    options: opts,\n    passes: passes\n  };\n}\n\nconst loadDescriptor = (0, _caching.makeWeakCache)(({\n  value,\n  options,\n  dirname,\n  alias\n}, cache) => {\n  if (options === false) throw new Error(\"Assertion failure\");\n  options = options || {};\n  let item = value;\n\n  if (typeof value === \"function\") {\n    const api = Object.assign({}, context, (0, _configApi.default)(cache));\n\n    try {\n      item = value(api, options, dirname);\n    } catch (e) {\n      if (alias) {\n        e.message += ` (While processing: ${JSON.stringify(alias)})`;\n      }\n\n      throw e;\n    }\n  }\n\n  if (!item || typeof item !== \"object\") {\n    throw new Error(\"Plugin/Preset did not return an object.\");\n  }\n\n  if (typeof item.then === \"function\") {\n    throw new Error(`You appear to be using an async plugin, ` + `which your current version of Babel does not support. ` + `If you're using a published plugin, ` + `you may need to upgrade your @babel/core version.`);\n  }\n\n  return {\n    value: item,\n    options,\n    dirname,\n    alias\n  };\n});\n\nfunction loadPluginDescriptor(descriptor, context) {\n  if (descriptor.value instanceof _plugin.default) {\n    if (descriptor.options) {\n      throw new Error(\"Passed options to an existing Plugin instance will not work.\");\n    }\n\n    return descriptor.value;\n  }\n\n  return instantiatePlugin(loadDescriptor(descriptor, context), context);\n}\n\nconst instantiatePlugin = (0, _caching.makeWeakCache)(({\n  value,\n  options,\n  dirname,\n  alias\n}, cache) => {\n  const pluginObj = (0, _plugins.validatePluginObject)(value);\n  const plugin = Object.assign({}, pluginObj);\n\n  if (plugin.visitor) {\n    plugin.visitor = _traverse().default.explode(Object.assign({}, plugin.visitor));\n  }\n\n  if (plugin.inherits) {\n    const inheritsDescriptor = {\n      name: undefined,\n      alias: `${alias}$inherits`,\n      value: plugin.inherits,\n      options,\n      dirname\n    };\n    const inherits = cache.invalidate(data => loadPluginDescriptor(inheritsDescriptor, data));\n    plugin.pre = chain(inherits.pre, plugin.pre);\n    plugin.post = chain(inherits.post, plugin.post);\n    plugin.manipulateOptions = chain(inherits.manipulateOptions, plugin.manipulateOptions);\n    plugin.visitor = _traverse().default.visitors.merge([inherits.visitor || {}, plugin.visitor || {}]);\n  }\n\n  return new _plugin.default(plugin, options, alias);\n});\n\nconst loadPresetDescriptor = (descriptor, context) => {\n  return (0, _configChain.buildPresetChain)(instantiatePreset(loadDescriptor(descriptor, context)), context);\n};\n\nconst instantiatePreset = (0, _caching.makeWeakCache)(({\n  value,\n  dirname,\n  alias\n}) => {\n  return {\n    options: (0, _options.validate)(\"preset\", value),\n    alias,\n    dirname\n  };\n});\n\nfunction chain(a, b) {\n  const fns = [a, b].filter(Boolean);\n  if (fns.length <= 1) return fns[0];\n  return function (...args) {\n    for (const fn of fns) {\n      fn.apply(this, args);\n    }\n  };\n}"],"file":"full.js"}