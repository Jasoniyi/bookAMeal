{"version":3,"sources":["../../../../../node_modules/@babel/helper-module-imports/lib/import-builder.js"],"names":["Object","defineProperty","exports","value","default","_assert","data","_interopRequireDefault","require","t","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","ImportBuilder","constructor","importedSource","scope","hub","_statements","_resultName","_scope","_hub","_importedSource","done","statements","resultName","import","push","importDeclaration","stringLiteral","expressionStatement","callExpression","identifier","namespace","name","generateUidIdentifier","statement","length","type","specifiers","importNamespaceSpecifier","cloneNode","importDefaultSpecifier","named","importName","importSpecifier","var","variableDeclaration","variableDeclarator","expression","defaultInterop","_interop","addHelper","wildcardInterop","callee","declarations","init","fail","prop","memberExpression","read"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _assert() {\n  const data = _interopRequireDefault(require(\"assert\"));\n\n  _assert = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction t() {\n  const data = _interopRequireWildcard(require(\"@babel/types\"));\n\n  t = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass ImportBuilder {\n  constructor(importedSource, scope, hub) {\n    this._statements = [];\n    this._resultName = null;\n    this._scope = null;\n    this._hub = null;\n    this._scope = scope;\n    this._hub = hub;\n    this._importedSource = importedSource;\n  }\n\n  done() {\n    return {\n      statements: this._statements,\n      resultName: this._resultName\n    };\n  }\n\n  import() {\n    this._statements.push(t().importDeclaration([], t().stringLiteral(this._importedSource)));\n\n    return this;\n  }\n\n  require() {\n    this._statements.push(t().expressionStatement(t().callExpression(t().identifier(\"require\"), [t().stringLiteral(this._importedSource)])));\n\n    return this;\n  }\n\n  namespace(name = \"namespace\") {\n    name = this._scope.generateUidIdentifier(name);\n    const statement = this._statements[this._statements.length - 1];\n    (0, _assert().default)(statement.type === \"ImportDeclaration\");\n    (0, _assert().default)(statement.specifiers.length === 0);\n    statement.specifiers = [t().importNamespaceSpecifier(name)];\n    this._resultName = t().cloneNode(name);\n    return this;\n  }\n\n  default(name) {\n    name = this._scope.generateUidIdentifier(name);\n    const statement = this._statements[this._statements.length - 1];\n    (0, _assert().default)(statement.type === \"ImportDeclaration\");\n    (0, _assert().default)(statement.specifiers.length === 0);\n    statement.specifiers = [t().importDefaultSpecifier(name)];\n    this._resultName = t().cloneNode(name);\n    return this;\n  }\n\n  named(name, importName) {\n    if (importName === \"default\") return this.default(name);\n    name = this._scope.generateUidIdentifier(name);\n    const statement = this._statements[this._statements.length - 1];\n    (0, _assert().default)(statement.type === \"ImportDeclaration\");\n    (0, _assert().default)(statement.specifiers.length === 0);\n    statement.specifiers = [t().importSpecifier(name, t().identifier(importName))];\n    this._resultName = t().cloneNode(name);\n    return this;\n  }\n\n  var(name) {\n    name = this._scope.generateUidIdentifier(name);\n    let statement = this._statements[this._statements.length - 1];\n\n    if (statement.type !== \"ExpressionStatement\") {\n      (0, _assert().default)(this._resultName);\n      statement = t().expressionStatement(this._resultName);\n\n      this._statements.push(statement);\n    }\n\n    this._statements[this._statements.length - 1] = t().variableDeclaration(\"var\", [t().variableDeclarator(name, statement.expression)]);\n    this._resultName = t().cloneNode(name);\n    return this;\n  }\n\n  defaultInterop() {\n    return this._interop(this._hub.addHelper(\"interopRequireDefault\"));\n  }\n\n  wildcardInterop() {\n    return this._interop(this._hub.addHelper(\"interopRequireWildcard\"));\n  }\n\n  _interop(callee) {\n    const statement = this._statements[this._statements.length - 1];\n\n    if (statement.type === \"ExpressionStatement\") {\n      statement.expression = t().callExpression(callee, [statement.expression]);\n    } else if (statement.type === \"VariableDeclaration\") {\n      (0, _assert().default)(statement.declarations.length === 1);\n      statement.declarations[0].init = t().callExpression(callee, [statement.declarations[0].init]);\n    } else {\n      _assert().default.fail(\"Unexpected type.\");\n    }\n\n    return this;\n  }\n\n  prop(name) {\n    const statement = this._statements[this._statements.length - 1];\n\n    if (statement.type === \"ExpressionStatement\") {\n      statement.expression = t().memberExpression(statement.expression, t().identifier(name));\n    } else if (statement.type === \"VariableDeclaration\") {\n      (0, _assert().default)(statement.declarations.length === 1);\n      statement.declarations[0].init = t().memberExpression(statement.declarations[0].init, t().identifier(name));\n    } else {\n      _assert().default.fail(\"Unexpected type:\" + statement.type);\n    }\n\n    return this;\n  }\n\n  read(name) {\n    this._resultName = t().memberExpression(this._resultName, t().identifier(name));\n  }\n\n}\n\nexports.default = ImportBuilder;"],"file":"import-builder.js"}